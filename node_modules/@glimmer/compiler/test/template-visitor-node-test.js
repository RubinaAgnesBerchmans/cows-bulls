'use strict';

var _syntax = require('@glimmer/syntax');

var _compiler = require('@glimmer/compiler');

const { test, assert } = QUnit;
function actionsEqual(input, expectedActions) {
    let ast = (0, _syntax.preprocess)(input);
    let templateVisitor = new _compiler.TemplateVisitor();
    templateVisitor.visit(ast);
    let actualActions = templateVisitor.actions;
    // Remove the AST node reference from the actions to keep tests leaner
    for (let i = 0; i < actualActions.length; i++) {
        actualActions[i][1].shift();
    }
    assert.deepEqual(actualActions, expectedActions);
}
QUnit.module('[glimmer-compiler] TemplateVisitor');
test('empty', function () {
    let input = '';
    actionsEqual(input, [['startProgram', [0, []]], ['endProgram', [0]]]);
});
test('basic', function () {
    let input = 'foo{{bar}}<div></div>';
    actionsEqual(input, [['startProgram', [0, []]], ['text', [0, 3]], ['mustache', [1, 3]], ['openElement', [2, 3, 0, []]], ['closeElement', [2, 3]], ['endProgram', [0]]]);
});
test('nested HTML', function () {
    let input = '<a></a><a><a><a></a></a></a>';
    actionsEqual(input, [['startProgram', [0, []]], ['openElement', [0, 2, 0, []]], ['closeElement', [0, 2]], ['openElement', [1, 2, 0, []]], ['openElement', [0, 1, 0, []]], ['openElement', [0, 1, 0, []]], ['closeElement', [0, 1]], ['closeElement', [0, 1]], ['closeElement', [1, 2]], ['endProgram', [0]]]);
});
test('mustaches are counted correctly', function () {
    let input = '<a><a>{{foo}}</a><a {{foo}}><a>{{foo}}</a><a>{{foo}}</a></a></a>';
    actionsEqual(input, [['startProgram', [0, []]], ['openElement', [0, 1, 2, []]], ['openElement', [0, 2, 1, []]], ['mustache', [0, 1]], ['closeElement', [0, 2]], ['openElement', [1, 2, 3, []]], ['openElement', [0, 2, 1, []]], ['mustache', [0, 1]], ['closeElement', [0, 2]], ['openElement', [1, 2, 1, []]], ['mustache', [0, 1]], ['closeElement', [1, 2]], ['closeElement', [1, 2]], ['closeElement', [0, 1]], ['endProgram', [0]]]);
});
test('empty block', function () {
    let input = '{{#a}}{{/a}}';
    actionsEqual(input, [['startBlock', [0, []]], ['endBlock', [1]], ['startProgram', [1, []]], ['block', [0, 1]], ['endProgram', [0]]]);
});
test('block with inverse', function () {
    let input = '{{#a}}b{{^}}{{/a}}';
    actionsEqual(input, [['startBlock', [0, []]], ['endBlock', [1]], ['startBlock', [0, []]], ['text', [0, 1]], ['endBlock', [1]], ['startProgram', [2, []]], ['block', [0, 1]], ['endProgram', [0]]]);
});
test('nested blocks', function () {
    let input = '{{#a}}{{#a}}<b></b>{{/a}}{{#a}}{{b}}{{/a}}{{/a}}{{#a}}b{{/a}}';
    actionsEqual(input, [['startBlock', [0, []]], ['text', [0, 1]], ['endBlock', [1]], ['startBlock', [0, []]], ['mustache', [0, 1]], ['endBlock', [2]], ['startBlock', [0, []]], ['openElement', [0, 1, 0, []]], ['closeElement', [0, 1]], ['endBlock', [2]], ['startBlock', [2, []]], ['block', [0, 2]], ['block', [1, 2]], ['endBlock', [1]], ['startProgram', [2, []]], ['block', [0, 2]], ['block', [1, 2]], ['endProgram', [0]]]);
});
test('comment', function () {
    let input = '<!-- some comment -->';
    actionsEqual(input, [['startProgram', [0, []]], ['comment', [0, 1]], ['endProgram', [0]]]);
});
test('handlebars comment', function () {
    let input = '{{! some comment }}';
    actionsEqual(input, [['startProgram', [0, []]], ['endProgram', [0]]]);
});
test('handlebars comment in element space', function () {
    let input = '<div {{! some comment }}></div>';
    actionsEqual(input, [['startProgram', [0, []]], ['openElement', [0, 1, 0, []]], ['closeElement', [0, 1]], ['endProgram', [0]]]);
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3BhY2thZ2VzL0BnbGltbWVyL2NvbXBpbGVyL3Rlc3QvdGVtcGxhdGUtdmlzaXRvci1ub2RlLXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUNBOztBQUVBLE1BQU0sRUFBRSxJQUFGLEVBQVEsTUFBUixLQUFtQixLQUF6QjtBQUVBLFNBQVMsWUFBVCxDQUFzQixLQUF0QixFQUFxQyxlQUFyQyxFQUEyRDtBQUN6RCxRQUFJLE1BQU0sd0JBQVcsS0FBWCxDQUFWO0FBRUEsUUFBSSxrQkFBa0IsSUFBSSx5QkFBSixFQUF0QjtBQUNBLG9CQUFnQixLQUFoQixDQUFzQixHQUF0QjtBQUNBLFFBQUksZ0JBQWdCLGdCQUFnQixPQUFwQztBQUVBO0FBQ0EsU0FBSyxJQUFJLElBQUksQ0FBYixFQUFnQixJQUFJLGNBQWMsTUFBbEMsRUFBMEMsR0FBMUMsRUFBK0M7QUFDN0Msc0JBQWMsQ0FBZCxFQUFpQixDQUFqQixFQUFvQixLQUFwQjtBQUNEO0FBRUQsV0FBTyxTQUFQLENBQWlCLGFBQWpCLEVBQWdDLGVBQWhDO0FBQ0Q7QUFFRCxNQUFNLE1BQU4sQ0FBYSxvQ0FBYjtBQUVBLEtBQUssT0FBTCxFQUFjLFlBQUE7QUFDWixRQUFJLFFBQVEsRUFBWjtBQUNBLGlCQUFhLEtBQWIsRUFBb0IsQ0FBQyxDQUFDLGNBQUQsRUFBaUIsQ0FBQyxDQUFELEVBQUksRUFBSixDQUFqQixDQUFELEVBQTRCLENBQUMsWUFBRCxFQUFlLENBQUMsQ0FBRCxDQUFmLENBQTVCLENBQXBCO0FBQ0QsQ0FIRDtBQUtBLEtBQUssT0FBTCxFQUFjLFlBQUE7QUFDWixRQUFJLFFBQVEsdUJBQVo7QUFDQSxpQkFBYSxLQUFiLEVBQW9CLENBQ2xCLENBQUMsY0FBRCxFQUFpQixDQUFDLENBQUQsRUFBSSxFQUFKLENBQWpCLENBRGtCLEVBRWxCLENBQUMsTUFBRCxFQUFTLENBQUMsQ0FBRCxFQUFJLENBQUosQ0FBVCxDQUZrQixFQUdsQixDQUFDLFVBQUQs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cG9ydCB7IFRlbXBsYXRlVmlzaXRvciB9IGZyb20gJ0BnbGltbWVyL2NvbXBpbGVyJztcblxuY29uc3QgeyB0ZXN0LCBhc3NlcnQgfSA9IFFVbml0O1xuXG5mdW5jdGlvbiBhY3Rpb25zRXF1YWwoaW5wdXQ6IHN0cmluZywgZXhwZWN0ZWRBY3Rpb25zOiBhbnlbXSkge1xuICBsZXQgYXN0ID0gcHJlcHJvY2VzcyhpbnB1dCk7XG5cbiAgbGV0IHRlbXBsYXRlVmlzaXRvciA9IG5ldyBUZW1wbGF0ZVZpc2l0b3IoKTtcbiAgdGVtcGxhdGVWaXNpdG9yLnZpc2l0KGFzdCk7XG4gIGxldCBhY3R1YWxBY3Rpb25zID0gdGVtcGxhdGVWaXNpdG9yLmFjdGlvbnM7XG5cbiAgLy8gUmVtb3ZlIHRoZSBBU1Qgbm9kZSByZWZlcmVuY2UgZnJvbSB0aGUgYWN0aW9ucyB0byBrZWVwIHRlc3RzIGxlYW5lclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFjdHVhbEFjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICBhY3R1YWxBY3Rpb25zW2ldWzFdLnNoaWZ0KCk7XG4gIH1cblxuICBhc3NlcnQuZGVlcEVxdWFsKGFjdHVhbEFjdGlvbnMsIGV4cGVjdGVkQWN0aW9ucyk7XG59XG5cblFVbml0Lm1vZHVsZSgnW2dsaW1tZXItY29tcGlsZXJdIFRlbXBsYXRlVmlzaXRvcicpO1xuXG50ZXN0KCdlbXB0eScsIGZ1bmN0aW9uKCkge1xuICBsZXQgaW5wdXQgPSAnJztcbiAgYWN0aW9uc0VxdWFsKGlucHV0LCBbWydzdGFydFByb2dyYW0nLCBbMCwgW11dXSwgWydlbmRQcm9ncmFtJywgWzBdXV0pO1xufSk7XG5cbnRlc3QoJ2Jhc2ljJywgZnVuY3Rpb24oKSB7XG4gIGxldCBpbnB1dCA9ICdmb297e2Jhcn19PGRpdj48L2Rpdj4nO1xuICBhY3Rpb25zRXF1YWwoaW5wdXQsIFtcbiAgICBbJ3N0YXJ0UHJvZ3JhbScsIFswLCBbXV1dLFxuICAgIFsndGV4dCcsIFswLCAzXV0sXG4gICAgWydtdXN0YWNoZScsIFsxLCAzXV0sXG4gICAgWydvcGVuRWxlbWVudCcsIFsyLCAzLCAwLCBbXV1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzIsIDNdXSxcbiAgICBbJ2VuZFByb2dyYW0nLCBbMF1dLFxuICBdKTtcbn0pO1xuXG50ZXN0KCduZXN0ZWQgSFRNTCcsIGZ1bmN0aW9uKCkge1xuICBsZXQgaW5wdXQgPSAnPGE+PC9hPjxhPjxhPjxhPjwvYT48L2E+PC9hPic7XG4gIGFjdGlvbnNFcXVhbChpbnB1dCwgW1xuICAgIFsnc3RhcnRQcm9ncmFtJywgWzAsIFtdXV0sXG4gICAgWydvcGVuRWxlbWVudCcsIFswLCAyLCAwLCBbXV1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzAsIDJdXSxcbiAgICBbJ29wZW5FbGVtZW50JywgWzEsIDIsIDAsIFtdXV0sXG4gICAgWydvcGVuRWxlbWVudCcsIFswLCAxLCAwLCBbXV1dLFxuICAgIFsnb3BlbkVsZW1lbnQnLCBbMCwgMSwgMCwgW11dXSxcbiAgICBbJ2Nsb3NlRWxlbWVudCcsIFswLCAxXV0sXG4gICAgWydjbG9zZUVsZW1lbnQnLCBbMCwgMV1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzEsIDJdXSxcbiAgICBbJ2VuZFByb2dyYW0nLCBbMF1dLFxuICBdKTtcbn0pO1xuXG50ZXN0KCdtdXN0YWNoZXMgYXJlIGNvdW50ZWQgY29ycmVjdGx5JywgZnVuY3Rpb24oKSB7XG4gIGxldCBpbnB1dCA9ICc8YT48YT57e2Zvb319PC9hPjxhIHt7Zm9vfX0+PGE+e3tmb299fTwvYT48YT57e2Zvb319PC9hPjwvYT48L2E+JztcbiAgYWN0aW9uc0VxdWFsKGlucHV0LCBbXG4gICAgWydzdGFydFByb2dyYW0nLCBbMCwgW11dXSxcbiAgICBbJ29wZW5FbGVtZW50JywgWzAsIDEsIDIsIFtdXV0sXG4gICAgWydvcGVuRWxlbWVudCcsIFswLCAyLCAxLCBbXV1dLFxuICAgIFsnbXVzdGFjaGUnLCBbMCwgMV1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzAsIDJdXSxcbiAgICBbJ29wZW5FbGVtZW50JywgWzEsIDIsIDMsIFtdXV0sXG4gICAgWydvcGVuRWxlbWVudCcsIFswLCAyLCAxLCBbXV1dLFxuICAgIFsnbXVzdGFjaGUnLCBbMCwgMV1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzAsIDJdXSxcbiAgICBbJ29wZW5FbGVtZW50JywgWzEsIDIsIDEsIFtdXV0sXG4gICAgWydtdXN0YWNoZScsIFswLCAxXV0sXG4gICAgWydjbG9zZUVsZW1lbnQnLCBbMSwgMl1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzEsIDJdXSxcbiAgICBbJ2Nsb3NlRWxlbWVudCcsIFswLCAxXV0sXG4gICAgWydlbmRQcm9ncmFtJywgWzBdXSxcbiAgXSk7XG59KTtcblxudGVzdCgnZW1wdHkgYmxvY2snLCBmdW5jdGlvbigpIHtcbiAgbGV0IGlucHV0ID0gJ3t7I2F9fXt7L2F9fSc7XG4gIGFjdGlvbnNFcXVhbChpbnB1dCwgW1xuICAgIFsnc3RhcnRCbG9jaycsIFswLCBbXV1dLFxuICAgIFsnZW5kQmxvY2snLCBbMV1dLFxuICAgIFsnc3RhcnRQcm9ncmFtJywgWzEsIFtdXV0sXG4gICAgWydibG9jaycsIFswLCAxXV0sXG4gICAgWydlbmRQcm9ncmFtJywgWzBdXSxcbiAgXSk7XG59KTtcblxudGVzdCgnYmxvY2sgd2l0aCBpbnZlcnNlJywgZnVuY3Rpb24oKSB7XG4gIGxldCBpbnB1dCA9ICd7eyNhfX1ie3tefX17ey9hfX0nO1xuICBhY3Rpb25zRXF1YWwoaW5wdXQsIFtcbiAgICBbJ3N0YXJ0QmxvY2snLCBbMCwgW11dXSxcbiAgICBbJ2VuZEJsb2NrJywgWzFdXSxcbiAgICBbJ3N0YXJ0QmxvY2snLCBbMCwgW11dXSxcbiAgICBbJ3RleHQnLCBbMCwgMV1dLFxuICAgIFsnZW5kQmxvY2snLCBbMV1dLFxuICAgIFsnc3RhcnRQcm9ncmFtJywgWzIsIFtdXV0sXG4gICAgWydibG9jaycsIFswLCAxXV0sXG4gICAgWydlbmRQcm9ncmFtJywgWzBdXSxcbiAgXSk7XG59KTtcblxudGVzdCgnbmVzdGVkIGJsb2NrcycsIGZ1bmN0aW9uKCkge1xuICBsZXQgaW5wdXQgPSAne3sjYX19e3sjYX19PGI+PC9iPnt7L2F9fXt7I2F9fXt7Yn19e3svYX19e3svYX19e3sjYX19Ynt7L2F9fSc7XG4gIGFjdGlvbnNFcXVhbChpbnB1dCwgW1xuICAgIFsnc3RhcnRCbG9jaycsIFswLCBbXV1dLFxuICAgIFsndGV4dCcsIFswLCAxXV0sXG4gICAgWydlbmRCbG9jaycsIFsxXV0sXG4gICAgWydzdGFydEJsb2NrJywgWzAsIFtdXV0sXG4gICAgWydtdXN0YWNoZScsIFswLCAxXV0sXG4gICAgWydlbmRCbG9jaycsIFsyXV0sXG4gICAgWydzdGFydEJsb2NrJywgWzAsIFtdXV0sXG4gICAgWydvcGVuRWxlbWVudCcsIFswLCAxLCAwLCBbXV1dLFxuICAgIFsnY2xvc2VFbGVtZW50JywgWzAsIDFdXSxcbiAgICBbJ2VuZEJsb2NrJywgWzJdXSxcbiAgICBbJ3N0YXJ0QmxvY2snLCBbMiwgW11dXSxcbiAgICBbJ2Jsb2NrJywgWzAsIDJdXSxcbiAgICBbJ2Jsb2NrJywgWzEsIDJdXSxcbiAgICBbJ2VuZEJsb2NrJywgWzFdXSxcbiAgICBbJ3N0YXJ0UHJvZ3JhbScsIFsyLCBbXV1dLFxuICAgIFsnYmxvY2snLCBbMCwgMl1dLFxuICAgIFsnYmxvY2snLCBbMSwgMl1dLFxuICAgIFsnZW5kUHJvZ3JhbScsIFswXV0sXG4gIF0pO1xufSk7XG5cbnRlc3QoJ2NvbW1lbnQnLCBmdW5jdGlvbigpIHtcbiAgbGV0IGlucHV0ID0gJzwhLS0gc29tZSBjb21tZW50IC0tPic7XG4gIGFjdGlvbnNFcXVhbChpbnB1dCwgW1snc3RhcnRQcm9ncmFtJywgWzAsIFtdXV0sIFsnY29tbWVudCcsIFswLCAxXV0sIFsnZW5kUHJvZ3JhbScsIFswXV1dKTtcbn0pO1xuXG50ZXN0KCdoYW5kbGViYXJzIGNvbW1lbnQnLCBmdW5jdGlvbigpIHtcbiAgbGV0IGlucHV0ID0gJ3t7ISBzb21lIGNvbW1lbnQgfX0nO1xuICBhY3Rpb25zRXF1YWwoaW5wdXQsIFtbJ3N0YXJ0UHJvZ3JhbScsIFswLCBbXV1dLCBbJ2VuZFByb2dyYW0nLCBbMF1dXSk7XG59KTtcblxudGVzdCgnaGFuZGxlYmFycyBjb21tZW50IGluIGVsZW1lbnQgc3BhY2UnLCBmdW5jdGlvbigpIHtcbiAgbGV0IGlucHV0ID0gJzxkaXYge3shIHNvbWUgY29tbWVudCB9fT48L2Rpdj4nO1xuICBhY3Rpb25zRXF1YWwoaW5wdXQsIFtcbiAgICBbJ3N0YXJ0UHJvZ3JhbScsIFswLCBbXV1dLFxuICAgIFsnb3BlbkVsZW1lbnQnLCBbMCwgMSwgMCwgW11dXSxcbiAgICBbJ2Nsb3NlRWxlbWVudCcsIFswLCAxXV0sXG4gICAgWydlbmRQcm9ncmFtJywgWzBdXSxcbiAgXSk7XG59KTtcbiJdLCJzb3VyY2VSb290IjoiIn0=